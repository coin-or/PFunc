\documentclass[9pt,twocolumn,letter]{article}

\include{pfunc-defs} 
\include{squeeze}

\lstset{language=C++,style=basic}

\begin{document}

\title{PFunc: A Tool for Teaching and Implementing Task Parallelism}

\date{A proposal for a 1/2 hour presentation at EduPar 2011}

\numberofauthors{3}
\author{
  \alignauthor Prabhanjan Kambadur\\
  \affaddr{IBM TJ Watson Research Center}\\
  \email{pkambadu@us.ibm.com}
  \alignauthor Anshul Gupta\\
  \affaddr{IBM TJ Watson Research Center}\\
  \email{anshul@us.ibm.com}
  \alignauthor Andrew Lumsdaine\\
  \affaddr{Open Systems Lab}\\
  \affaddr{Indiana University}\\
  \email{lums@osl.iu.edu}
}

\maketitle

\begin{abstract} 
Task parallelism is an intuitive and generic model of parallelism, which
subsumes both the data parallel and SPMD~\cite{darema2001} models, and can be
used to parallelize both regular and irregular applications.
%
Inclusion of task parallelism in a modern undergraduate Computer Science and
Engineering curriculum is therefore essential, whether the students are
preparing for industrial or academic careers.
%
In this presentation, we showcase PFunc, an open-source library for
task parallelism that has been designed not only for practitioners, 
but also as
a pedagogical tool for writing parallel programs with ease and flexibility.
%
Specifically, we will focus on those aspects of PFunc that make it an ideal 
tool for hands-on
learning of both basic and advanced topics in parallel programming.
\end{abstract}

\section{Introduction}
% The importance of teaching hands-on parallel programming.
\begin{center}
\small{\textit{``I hear, I know. I see, I remember. I do, I understand.'' -
Confucius.}}
\end{center}
%
Until recently, the practice of parallel programming was largely excluded 
from undergraduate curriculum both because of a lack of adequate parallel
programming facilities and the relative absence of parallel programming 
in the mainstream.
%
However, due to the ubiquity of multi-core CPUs on commodity desktops and
laptops, knowledge of parallel programming has now become an essential skill
for undergraduate students. 
%
%Until recently, the practice of parallel programming was outside the reach of
%many classrooms, particularly in relatively small colleges due to the lack of
%easy access to parallel programming platforms.
% 
%However, due to the ubiquity of multi-core CPUs on commodity desktops and
%laptops, parallel programming can now be practiced by one and all.
%
% Why teach task parallelism instead of other forms
Of the available parallel programming models, task parallelism is sufficiently
high-level and generic, thereby enabling it to parallelize regular and
irregular applications on shared and distributed architectures.  
%
Therefore, it should be an integral part of undergraduate curriculum whether
the students are preparing for an industrial or academic careers.

% Languages, language extensions, library models.
% Why is the library model practical and better for pedagogy?
Task parallel programming environments can be broadly classified into three
kinds: languages, language extensions and pragmas, and libraries.
% Languages
Many modern programming languages offer direct support for task parallelism
(eg., X10~\cite{Charles:2005p1232}).
%
However, these new languages are not well suited for teaching parallel
programming as they hide the machinery necessary for realizing task
parallelism.
%
Furthermore, these new languages are not yet used either in the industry or in
academia; so, the practical parallel programming expertise gained is not
immediately applicable.
%
Finally, forcing students to learn a new language takes focus away from
teaching parallel programming itself.
% Language extensions
Language extensions and pragmas such as Cilk~\cite{FrigoLeRa98} and
OpenMP~\cite{kn:omp_30} provide task parallelism while adding only a few new
``keywords'' to existing stock programming languages, which makes their
adaptation (relative to new languages) easier.
%
However, for pedagogical purposes, they suffer from many of the shortcomings of
new languages.
% Libraries
Libraries written in stock programming languages such as C/\Cpp{} have long 
been used in both industry and academia for parallelizing applications.
%
Well-designed task parallel libraries can offer significantly more
flexibility in programming than any other means of realizing
parallelism.
%
Furthermore, as most of the machinery is written in stock programming
languages, essential programming tools such as debuggers, profilers, and memory
checkers can be used to both develop parallel programs and understand some of
the ``little details'' that affect a parallel program's behavior.

%
% Why should PFunc be the recommended vehicle for teaching undergraduate 
% course work? What are its benefits? Address these two questions.
%
% 1. Open-source with BSD-style license.
% 2. Portable to Windows, Linux, OSX, and AIX.
% 3. Well documented and stable.
% 4. Works with stock C++ compiler, no tool chain necessary.
% 5. Can be used for a follow up course or for students who are more 
%    adventurous.
% 6. Many examples to choose from (DAG scheduling, Itemset mining, 
%    BLAS, select NAS parallel benchmarks, simple examples).
% 7. Actively supported.
%
\section{PFunc}
\label{sec:pfunc}
PFunc~\cite{kambadur09:pfunc}, short for Parallel Functions, is a C/\Cpp{}
library for task parallelism that has been designed both as a
high-performance, production-grade library for practitioners and as a
pedagogical tool for writing parallel programs with ease and flexibility.
%
PFunc is particularly well suited for the classroom as it not only permits, but
encourages experimentation.
%
The features offered by PFunc are a strict superset of the features offered by
other solutions (languages, language extensions, and libraries) for task
parallelism.

%
% Practical aspects. For beginners.
%
PFunc is an open-source software that has been released under the BSD-style
Eclipse Public License-v1.0.~\footnote{\texttt
http://www.eclipse.org/legal/epl-v10.html}
%
PFunc runs \textit{natively} on Windows, OSX, Linux, and AIX (x86 and
PowerPC chips) with any standards compliant C/\Cpp{} compiler; that is, PFunc
can be freely installed and used on any desktop or laptop.
%
PFunc is stable, well documented, and actively developed with detailed
tutorials and techincal support available through its
website.~\footnote{\texttt https://projects.coin-or.org/PFunc.}
%
Additional learning/teaching material is available in the form of example
programs that demonstrate different approaches for using PFunc to achieve the
same goal and the impact of each approach on performance.
%
Furthermore, several high performance programs including DAG scheduling,
frequent pattern mining, select BLAS kernels, and select NAS parallel
benchmarks parallelized using PFunc are also freely available.
%
To help understand, develop, and debug parallel programs, PFunc provides a
production-grade exception handling mechanism that operates smoothly across
thread boundaries.
%
Therefore, PFunc is an excellent candidate for teaching task parallelism to 
undergraduate and graduate students.

%
% For advanced users
%
Like the \Cpp{} Standard Library (SL)~\cite{musser01:_stl_ref_guide}, PFunc is
a generic library~\cite{Musser:1989:GP}; students can freely experiment with
different task scheduling policies, priorities, and affinities by plugging in
the appropriate template parameters at compile time.
%
Not only can students choose from a wide variety of built-in options for these
parameters (eg., Cilk-style, FIFO, and LIFO scheduling), but also implement
their own customizations with ease.
%
Orthogonally, PFunc also allows switching between different degrees of the
work-sharing model to work-stealing model~\cite{Blumofe94} through its
initialization API.
%
Furthermore, PFunc comes with built-in integration with PAPI~\cite{papi}, an
open-source API for portable performance characterization of programs on a
variety of architectures. 
%
Hence, PFunc can also be used for teaching advanced topics in parallel
programming such as task scheduling, work-stealing, and performance tuning. 

%
% Write about TBB, TPL, PPL, and Apple's Grand Central Dispatch --- why each of
% them is not uniquely suited for our purposes.
%
\section{Related Work}
Apart from PFunc, there are several libraries that provide support for task 
parallelism.
%
Apple's Grand Central Dispatch~\cite{kn:gcd} (GCD) provides APIs for task
parallelism, but it is relatively non-portable (requires OSX 10.6+ or FreeBSD
8.1+) and does not lend itself to experimentation.
%
Microsoft's Task Parallel Library~\cite{kn:tpl} (TPL), suffers from drawbacks
similar to that of GCD; in addition, it is also not an open-source software.
%
Intel's Threading Building Blocks~\cite{kn:tbb} (TBB) is an elegantly crafted,
portable library for task parallelism.
%
In addition to support for task parallelism, TBB also provides parallel-safe 
data structures such as queues and hash maps.
%
TBB is released under a commercial-aligned open source license that makes it
available free-of-cost \textit{only} for teaching purposes.
%
Like TPL and GCD, TBB does not lend itself for experimentation.

\footnotesize
\bibliographystyle{abbrv}
\bibliography{refs}

\end{document}
